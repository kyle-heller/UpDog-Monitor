server {
    listen 80;
    server_name localhost;
    root /usr/share/nginx/html;
    index index.html;

    # Serve static files directly
    location / {
        try_files $uri $uri/ /index.html;
    }

    # Why try_files with /index.html?
    # React is a Single Page App (SPA). When you navigate to /monitors/5,
    # there's no actual file at that path. We need to serve index.html
    # and let React Router handle the URL client-side.

    # Proxy API requests to the backend container
    location /api/ {
        proxy_pass http://api:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    # Why proxy_pass to "api:8000"?
    # In Docker Compose, services can reach each other by service name.
    # Our backend service is named "api", so "http://api:8000" works.
}
